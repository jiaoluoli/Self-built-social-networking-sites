{% extends "base_for_log.html" %}
{% block content %}
<style>
label{
	left: 10%;
}
</style>
<div class="row">
	<div class="small-12 small-centered medium-8 columns">
		<div class="panel m-panel shadow">
			<div class="row collapse">
				<div class="small-12 columns">
					<header class="form-header">
						<h2>登陆&nbsp;&nbsp;<small><a href="{{url_for('registered')}}">我还没有账号</a></small></h2>
					</header>
				</div>
			</div>
			<div class="row">
				<div class="small-12 columns">

					<form method="POST" accept-charset="utf-8" action="/login">
					 <input name= "lon" type="hidden">
           			 <input name= "lat" type="hidden">
						<div class="row">
							<div class="small-12 columns">
								<div class="form-group-material">
									<label class="material-label" for="uid">UID</label>
									<input class="material-field" name="uid" required="required" type="text" />
								</div>
							</div>
						</div>
						<div class="row">
							<div class="small-12 columns">
								<div class="form-group-material">
									<label class="material-label" for="password">密码</label>
									<input class="material-field" name="password" required="required" type="password" />
								</div>
							</div>
						</div>
				
				<div class="row">
					<div class="small-12 small-push-5 columns">
						<button type="submit">提交</button>
					</div>
				</div>
					
				</form>
				</div>
			</div>
		</div>
	</div>
</div>
    <script src="http://api.map.baidu.com/api?v=1.2" type="text/javascript"></script>
    <script>
        function getLocation() {
            var options = {
                enableHighAccuracy: true,
                maximumAge: 1000
            }
            if (navigator.geolocation) {
                //浏览器支持geolocation
                navigator.geolocation.getCurrentPosition(onSuccess, onError, options);

            } else {
                //浏览器不支持geolocation
            }
        }

        //成功时
        function onSuccess(position) {
            //返回用户位置
            //经度
            $('input[name=lon]').val(position.coords.longitude);
            //纬度
            $('input[name=lat]').val(position.coords.latitude);
        }


        //失败时
        function onError(error) {
            switch (error.code) {
                case 1:
                    alert("位置服务被拒绝");
                    break;

                case 2:
                    alert("暂时获取不到位置信息");
                    break;

                case 3:
                    alert("获取信息超时");
                    break;

                case 4:
                    alert("未知错误");
                    break;
            }

        }

        window.onload = getLocation;
    </script>
{% endblock %}